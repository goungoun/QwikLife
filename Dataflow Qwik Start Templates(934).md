# Dataflow Qwik Start: Templates
- Levels: introductory
- Link: https://www.qwiklabs.com/catalog_lab/934

## Summary
- Dataflow에서 제공되는 template을 사용하여 Pub/Sub으로 들어오는 스트리밍 데이터를 BigQuery에 저장
> template이 여러가지 종류가 있는데 그 설명은 [Google-Provided Templates](https://cloud.google.com/dataflow/docs/guides/templates/provided-templates#cloudpubsubtobigquery)을 참고


## Big Query
~~~bash
bq mk taxirides # make dataset
bq mk \
--time_partitioning_field timestamp \
--schema ride_id:string,point_idx:integer,latitude:float,longitude:float,\
timestamp:timestamp,meter_reading:float,meter_increment:float,ride_status:string,\
passenger_count:integer -t taxirides.realtime

Table 'qwiklabs-gcp-542a315588937eaa:taxirides.realtime' successfully created.
~~~
> 파티션 만드는 부분 주의 <br>
> Console에서 만들때는 destination table을 체크하도록 되어있음 (realtime) 이 정보를 통계를 만들 때 참고하려고 그런 것인가?

## Cloud Storage
~~~bash
export BUCKET_NAME=<your-unique-name>
gsutil mb gs://$BUCKET_NAME/
~~~

## Pub/Sub
- projects/pubsub-public-data/topics/taxirides-realtime
> 항상 실시간으로 데이터가 들어오는 토픽일까? 아니면 조금만 넣어놓은 토픽인가?

## Dataflow
- 튜토리얼도 한번 읽어보기

## Comment
- Schema 변경되는 부분은 어떻게 처리하나?
- Pub/Sub쪽만 빼면 이 구성으로 배치 만드는 것을 시연할 수 있음
- 실시간 데이터 입수인데 bigquery에 바로 쏘는데 파티션 추가를 안해도 되서 편한가.. addpartition.py 같은거 안 만들어도 되어서 편한가?

## Qwiklabs Support
- 내가 직접 template을 작성할 수 있는지? 가능하다. 템플릿 선택하는 부분에 가장 마지막을 선택하면 bucket에 업로드한 템플릿을 불러올 수 있음
> 템플릿 생성하는 법: https://cloud.google.com/dataflow/docs/guides/templates/creating-templates 
- 기존에 만들어진 template을 export 해서 소스코드를 볼 수 있나? 
> 없다
~~~

Anjali Kumari (Qwiklabs Support)

Jan 4, 03:43 EST

Hi Goun,

Thanks for reaching out to us!

We want to let you know that you can not export the java or python code generated by the template.

Also, your query regarding creating your own template, yes, you can create it. But, we recommend you to not create any extra template in Qwiklabs environment as Qwiklabs have limitations of resources. If you try to perform any extra things other than the lab configuration, it may cause account block due to fraud behavior. 

You can refer this document for creating the template: https://cloud.google.com/dataflow/docs/guides/templates/creating-templates 

Hope this answers your query.

Please feel free to reach out to us again if you have any further concerns. We will be happy to help you.

See you in the Cloud,
Anjali from Qwiklabs
~~~